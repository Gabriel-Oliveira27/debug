<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Cartazes - Sistema Interno</title>
    <link rel="icon" type="image/png" href="/image/zenirlogo.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
    <!-- Loading Overlay Moderno -->
    <div id="overlay">
        <div class="overlay-box">
            <!-- Spinner animado -->
            <div class="overlay-spinner-container">
                <div class="spinner-modern"></div>
                <div class="spinner-pulse"></div>
            </div>
            
            <!-- Ícone de status (muda conforme o estado) -->
            <div class="overlay-icon" id="overlay-icon">
                <i class="fa-solid fa-magnifying-glass"></i>
            </div>
            
            <!-- Texto de status -->
            <p id="overlay-texto" class="overlay-texto">Buscando informações...</p>
            
            <!-- Subtexto opcional -->
            <p id="overlay-subtexto" class="overlay-subtexto">Aguarde um momento</p>
        </div>
    </div>

    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
<div class="sidebar-header">
                <div class="logo">
                    <img src="../image/logo.png" width="60" alt="" srcset="">
                    <div>
                        <h2>Gerador de Cartazes</h2>
                        <p>Sistema Gabriel</p>
                    </div>
                </div>
            </div>

            <nav class="sidebar-nav">
                <button class="nav-item active" data-view="gerar">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
                    </svg>
                    <span>Gerar cartaz</span>
                </button>

                <button class="nav-item" data-view="produtos">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"/>
                    </svg>
                    <span>Produtos adicionados/Previews</span>
                </button>

                <button class="nav-item" data-view="calculadora">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V4a2 2 0 00-2-2H6zm1 2a1 1 0 000 2h6a1 1 0 100-2H7zm6 7a1 1 0 011 1v3a1 1 0 11-2 0v-3a1 1 0 011-1zm-3 3a1 1 0 100 2h.01a1 1 0 100-2H10zm-4 1a1 1 0 011-1h.01a1 1 0 110 2H7a1 1 0 01-1-1zm1-4a1 1 0 100 2h.01a1 1 0 100-2H7zm2 1a1 1 0 011-1h.01a1 1 0 110 2H10a1 1 0 01-1-1zm4-4a1 1 0 100 2h.01a1 1 0 100-2H13zM9 9a1 1 0 011-1h.01a1 1 0 110 2H10a1 1 0 01-1-1zM7 8a1 1 0 000 2h.01a1 1 0 000-2H7z" clip-rule="evenodd"/>
                    </svg>
                    <span>Calculadora de fator</span>
                </button>

                <!-- Seção Expansível: Extras -->
                <div class="nav-section">
                    <button class="nav-section-toggle" id="toggle-extras">
                        <i class="fa-solid fa-grid-2-plus"></i>
                        <span>Campos Extras</span>
                        <i class="fa-solid fa-chevron-down nav-section-arrow"></i>
                    </button>
                    <div class="nav-section-content" id="extras-content">
                        <button class="nav-item sub-item" id="btn-campos-obrigatorios">
                            <i class="fa-solid fa-asterisk"></i>
                            <span>Campos obrigatórios</span>
                        </button>
                        <button class="nav-item sub-item" data-view="cama-box">
                            <i class="fa-solid fa-bed"></i>
                            <span>Cama box</span>
                        </button>
                        <button class="nav-item sub-item" data-view="mesa-cadeiras">
                            <i class="fa-solid fa-chair"></i>
                            <span>Mesa e cadeiras</span>
                        </button>
                        <button class="nav-item sub-item" data-view="cama-mesa-banho">
                            <i class="fa-solid fa-layer-group"></i>
                            <span>Cama, mesa e banho</span>
                        </button>
                        <button class="nav-item sub-item" id="btn-debug">
                            <i class="fa-solid fa-bug"></i>
                            <span>Debug</span>
                        </button>
                    </div>
                </div>
            </nav>

            <div class="sidebar-footer">
                <button class="btn-home" id="btn-home">
                    <i class="fa-solid fa-house"></i>
                    <span>Voltar ao início</span>
                </button>
                
                <p>v3.0.4 • Sistema cartazes</p>
                <p>© 2025–2026 Gabriel Oliveira</p>
                <p>Todos os direitos reservados.</p>
 
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header Global -->
            <div class="global-header">
                <div class="header-info">
                    <h1>Sistema de Cartazes</h1>
                    <p id="header-subtitle">Bem-vindo ao sistema</p>
                </div>
            </div>

            <!-- View: Gerar Cartaz -->
            <div id="view-gerar" class="view active">
                <div class="card">
                    <form id="product-form">
                        <!-- Linha: Código, Descrição, Sub descrição -->
                        <div class="form-row-3cols">
                            <div class="form-group">
                                <label for="codigo">Código *</label>
                                <div class="input-with-icon">
                                    <input type="text" id="codigo" required placeholder="110049" maxlength="11">
                                    <button type="button" id="btn-buscar" class="icon-button" title="Buscar">
                                        <i class="fa-solid fa-magnifying-glass"></i>
                                    </button>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="descricao">Descrição *</label>
                                <input type="text" id="descricao" required placeholder="Ex: TV TOSHIBA 75POL. 4K QLED2" maxlength="35">
                            </div>

                            <div class="form-group">
                                <label for="subdescricao">Sub descrição</label>
                                <input type="text" id="subdescricao" placeholder="Ex: 75C450NS GOOGLE">
                            </div>
                        </div>

                        <!-- Características (metade do tamanho) -->
                        <div class="form-group">
                            <label>Características (separadas por " | ")</label>
                            <div class="features-input-compact">
                                <input type="text" id="feature-1" placeholder="Ex: QLED">
                                <span class="separator">|</span>
                                <input type="text" id="feature-2" placeholder="Google TV">
                                <span class="separator">|</span>
                                <input type="text" id="feature-3" placeholder="Bluetooth">
                            </div>
                        </div>

                        <!-- Linha: Parcelamento, Valor à vista, Taxa de juros, Valor da parcela -->
                        <div class="form-row-4cols">
                            <div class="form-group">
                                <label for="metodo">Parcelamento *</label>
                                <select id="metodo" required>
                                    <option value="">Selecione...</option>
                                    <option value="1x">1x</option>
                                    <option value="3x">3x</option>
                                    <option value="5x">5x</option>
                                    <option value="10x">10x</option>
                                    <option value="12x">12x</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="avista">Valor à vista *</label>
                                <div class="input-currency">
                                    <span>R$</span>
                                    <input type="text" id="avista" required placeholder="0,00">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="juros">Taxa de juros *</label>
                                <select id="juros" required>
                                    <option value="">Selecione...</option>
                                    <option value="carne">Carnê</option>
                                    <option value="cartao">Cartão</option>
                                    <option value="virado">Preço virado</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="parcela">Valor da parcela</label>
                                <div class="input-currency">
                                    <span>R$</span>
                                    <input type="text" id="parcela" placeholder="0,00">
                                </div>
                            </div>
                        </div>

                        <!-- Campos Extras (Motivo, Validade, Autorização) -->
                        <div id="extra-campos" style="display: none;">
                            <div class="form-group" id="campo-motivo" style="display: none;">
                                <label for="motivo">Motivo</label>
                                <input type="text" id="motivo" placeholder="Ex: BLACK FRIDAY 2024">
                            </div>

                            <div class="form-group" id="campo-validade" style="display: none;">
                                <label for="validade">Validade da oferta</label>
                                <input type="date" id="validade">
                            </div>

                            <div class="form-group" id="campo-autorizacao" style="display: none;">
                                <label for="autorizacao">Autorização</label>
                                <input type="text" id="autorizacao" placeholder="Ex: REJANE/ALLAN KARDEC">
                            </div>
                        </div>

                        <!-- Garantia -->
                        <div class="form-group">
                            <div class="warranty-toggle">
                                <div>
                                    <label for="garantia">Garantia estendida</label>
                                    <p class="help-text">Ativar opções de garantia</p>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" id="garantia">
                                    <span class="slider"></span>
                                </label>
                            </div>

                            <div id="warranty-options" class="warranty-options" style="display: none;">
                                <div class="warranty-input-group">
                                    <label for="garantia12">+12 meses</label>
                                    <input type="text" id="garantia12" placeholder="199,90">
                                </div>
                                <div class="warranty-input-group">
                                    <label for="garantia24">+24 meses</label>
                                    <input type="text" id="garantia24" placeholder="299,90" disabled>
                                </div>
                                <div class="warranty-input-group">
                                    <label for="garantia36">+36 meses</label>
                                    <input type="text" id="garantia36" placeholder="399,90" disabled>
                                </div>
                            </div>
                        </div>

                        <!-- Submit -->
                        <button type="submit" class="btn-primary">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"/>
                            </svg>
                            Adicionar produto
                        </button>
                    </form>
                </div>
            </div>

            <!-- View: Produtos e Previews -->
            <div id="view-produtos" class="view">
                <div class="products-header">
                    <div>
                        <h2>Produtos Adicionados</h2>
                        <p id="products-count">0 produto(s) adicionado(s)</p>
                    </div>
                    <button id="btn-gerar-pdf" class="btn-primary" style="display: none;">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"/>
                        </svg>
                        Gerar PDF de todos os cartazes
                    </button>
                </div>

                <div id="products-list" class="products-list">
                    <div class="empty-state">
                        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"/>
                        </svg>
                        <h3>Nenhum produto adicionado</h3>
                        <p>Adicione produtos usando o formulário para começar</p>
                    </div>
                </div>
            </div>

            <!-- View: Calculadora de Fator -->
            <div id="view-calculadora" class="view">
                <div class="card">
                    <h2 style="margin-bottom: 24px;">Calculadora de Fator</h2>
                    <p style="margin-bottom: 24px; color: var(--gray-600);">
                        Insira o valor à vista e selecione o tipo de taxa para calcular todas as parcelas automaticamente.
                    </p>
                    <form id="calculator-form">
                        <div class="form-row" style="grid-template-columns: 1fr 200px 200px;">
                            <div class="form-group">
                                <label for="calc-valor">Valor à vista *</label>
                                <div class="input-currency">
                                    <span>R$</span>
                                    <input type="text" id="calc-valor" required placeholder="0,00">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="calc-tipo">Tipo de taxa *</label>
                                <select id="calc-tipo" required>
                                    <option value="">Selecione...</option>
                                    <option value="carne">Carnê</option>
                                    <option value="cartao">Cartão</option>
                                </select>
                            </div>

                            <div class="form-group" style="display: flex; align-items: flex-end;">
                                <button type="submit" class="btn-primary" style="width: 100%;">Calcular Tabela</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>

            <!-- View: Cama Box -->
            <div id="view-cama-box" class="view">
                <div class="card">
                    <h2 style="margin-bottom: 16px;"><i class="fa-solid fa-bed"></i> Gerar Cartaz - Cama Box</h2>
                    <p style="margin-bottom: 24px; color: var(--gray-600);">Insira os códigos da base e do colchão para criar o cartaz do combo.</p>
                    
                    <form id="cama-box-form">
                        <!-- Códigos e tipo na mesma linha com botão buscar -->
                        <div class="form-row" style="grid-template-columns: 150px 150px 180px auto; margin-bottom: 20px; align-items: end;">
                            <div class="form-group">
                                <label for="codigo-base">Código Base *</label>
                                <input type="text" id="codigo-base" required placeholder="Ex: 110001" maxlength="11">
                            </div>

                            <div class="form-group">
                                <label for="codigo-colchao">Cód. Colchão *</label>
                                <input type="text" id="codigo-colchao" required placeholder="Ex: 110002" maxlength="11">
                            </div>

                            <div class="form-group">
                                <button type="button" id="btn-buscar-cama-box" class="btn-secondary" style="width: 100%; height: 46px;">
                                    <i class="fa-solid fa-magnifying-glass"></i> Buscar
                                </button>
                            </div>

                            <div class="form-group">
                                <label>Tipo *</label>
                                <input type="text" value="CAMA BOX" disabled style="background: var(--gray-100);">
                            </div>
                        </div>

                        <!-- Descrição e subdescricao (preenchidos automaticamente ou manual) -->
                        <div class="form-row-3cols">
                            <div class="form-group">
                                <label for="descricao-cb">Descrição *</label>
                                <input type="text" id="descricao-cb" required placeholder="Preenchido automaticamente">
                            </div>

                            <div class="form-group">
                                <label for="subdescricao-cb">Sub descrição</label>
                                <input type="text" id="subdescricao-cb" placeholder="Marca/Modelo">
                            </div>
                        </div>

                        <!-- Características -->
                        <div class="form-group">
                            <label>Características (separadas por " | ")</label>
                            <div class="features-input-compact">
                                <input type="text" id="feature-cb-1" placeholder="Ex: Queen">
                                <span class="separator">|</span>
                                <input type="text" id="feature-cb-2" placeholder="Base+Colchão">
                                <span class="separator">|</span>
                                <input type="text" id="feature-cb-3" placeholder="Ortopédico">
                            </div>
                        </div>

                        <!-- Parcelamento -->
                        <div class="form-row-4cols">
                            <div class="form-group">
                                <label for="metodo-cb">Parcelamento *</label>
                                <select id="metodo-cb" required>
                                    <option value="">Selecione...</option>
                                    <option value="1x">1x</option>
                                    <option value="3x">3x</option>
                                    <option value="5x">5x</option>
                                    <option value="10x">10x</option>
                                    <option value="12x">12x</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="avista-cb">Valor à vista *</label>
                                <div class="input-currency">
                                    <span>R$</span>
                                    <input type="text" id="avista-cb" required placeholder="Soma automática">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="juros-cb">Taxa de juros *</label>
                                <select id="juros-cb" required>
                                    <option value="">Selecione...</option>
                                    <option value="carne">Carnê</option>
                                    <option value="cartao">Cartão</option>
                                    <option value="virado">Preço virado</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="parcela-cb">Valor da parcela</label>
                                <div class="input-currency">
                                    <span>R$</span>
                                    <input type="text" id="parcela-cb" placeholder="0,00">
                                </div>
                            </div>
                        </div>

                        <!-- Campos extras -->
                        <div id="extra-campos-cb" style="display: none;"></div>

                        <button type="submit" class="btn-primary">
                            <i class="fa-solid fa-plus"></i> Adicionar Cama Box
                        </button>
                    </form>
                </div>
            </div>

            <!-- View: Mesa e Cadeiras -->
            <div id="view-mesa-cadeiras" class="view">
                <div class="card">
                    <h2 style="margin-bottom: 16px;"><i class="fa-solid fa-chair"></i> Gerar Cartaz - Mesa e Cadeiras</h2>
                    <p style="margin-bottom: 24px; color: var(--gray-600);">Insira os códigos da mesa e da cadeira, selecione a quantidade.</p>
                    
                    <form id="mesa-cadeiras-form">
                        <!-- Códigos, quantidade, botão buscar e tipo na mesma linha -->
                        <div class="form-row" style="grid-template-columns: 140px 140px 100px 150px auto; margin-bottom: 20px; align-items: end;">
                            <div class="form-group">
                                <label for="codigo-mesa">Cód. Mesa *</label>
                                <input type="text" id="codigo-mesa" required placeholder="Ex: 220001" maxlength="11">
                            </div>

                            <div class="form-group">
                                <label for="codigo-cadeira">Cód. Cadeira *</label>
                                <input type="text" id="codigo-cadeira" required placeholder="Ex: 220002" maxlength="11">
                            </div>

                            <div class="form-group">
                                <label for="qtd-cadeiras">Qtd. *</label>
                                <select id="qtd-cadeiras" required>
                                    <option value="">Qtd.</option>
                                    <option value="4">4</option>
                                    <option value="6">6</option>
                                    <option value="8">8</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <button type="button" id="btn-buscar-mesa-cadeiras" class="btn-secondary" style="width: 100%; height: 46px;">
                                    <i class="fa-solid fa-magnifying-glass"></i> Buscar
                                </button>
                            </div>

                            <div class="form-group">
                                <label>Tipo *</label>
                                <input type="text" value="MESA + CADEIRAS" disabled style="background: var(--gray-100);">
                            </div>
                        </div>

                        <!-- Descrição -->
                        <div class="form-row-3cols">
                            <div class="form-group">
                                <label for="descricao-mc">Descrição *</label>
                                <input type="text" id="descricao-mc" required placeholder="Preenchido automaticamente">
                            </div>

                            <div class="form-group">
                                <label for="subdescricao-mc">Sub descrição</label>
                                <input type="text" id="subdescricao-mc" placeholder="Marca/Modelo">
                            </div>
                        </div>

                        <!-- Características -->
                        <div class="form-group">
                            <label>Características (separadas por " | ")</label>
                            <div class="features-input-compact">
                                <input type="text" id="feature-mc-1" placeholder="Ex: Madeira Maciça">
                                <span class="separator">|</span>
                                <input type="text" id="feature-mc-2" placeholder="Cadeiras estofadas">
                                <span class="separator">|</span>
                                <input type="text" id="feature-mc-3" placeholder="Acabamento luxo">
                            </div>
                        </div>

                        <!-- Parcelamento -->
                        <div class="form-row-4cols">
                            <div class="form-group">
                                <label for="metodo-mc">Parcelamento *</label>
                                <select id="metodo-mc" required>
                                    <option value="">Selecione...</option>
                                    <option value="1x">1x</option>
                                    <option value="3x">3x</option>
                                    <option value="5x">5x</option>
                                    <option value="10x">10x</option>
                                    <option value="12x">12x</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="avista-mc">Valor à vista *</label>
                                <div class="input-currency">
                                    <span>R$</span>
                                    <input type="text" id="avista-mc" required placeholder="Cálculo: mesa+(cad*qtd)">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="juros-mc">Taxa de juros *</label>
                                <select id="juros-mc" required>
                                    <option value="">Selecione...</option>
                                    <option value="carne">Carnê</option>
                                    <option value="cartao">Cartão</option>
                                    <option value="virado">Preço virado</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="parcela-mc">Valor da parcela</label>
                                <div class="input-currency">
                                    <span>R$</span>
                                    <input type="text" id="parcela-mc" placeholder="0,00">
                                </div>
                            </div>
                        </div>

                        <!-- Campos extras -->
                        <div id="extra-campos-mc" style="display: none;"></div>

                        <button type="submit" class="btn-primary">
                            <i class="fa-solid fa-plus"></i> Adicionar Mesa e Cadeiras
                        </button>
                    </form>
                </div>
            </div>

            <!-- View: Cama, Mesa e Banho -->
            <div id="view-cama-mesa-banho" class="view">
                <div class="card">
                    <h2 style="margin-bottom: 16px;"><i class="fa-solid fa-layer-group"></i> Gerar Cartaz - Cama, Mesa e Banho</h2>
                    <p style="margin-bottom: 24px; color: var(--gray-600);">Formulário padrão com campo de códigos expansível e foco em cores.</p>
                    
                    <form id="cama-mesa-banho-form">
                        <!-- Campo de códigos expansível -->
                        <div class="form-group">
                            <label for="codigos-cmb">Códigos (separe por vírgula ou espaço)</label>
                            <textarea id="codigos-cmb" rows="2" placeholder="Ex: 110001, 220002, 330003..." style="width: 100%; padding: 12px 16px; border: 1px solid var(--gray-300); border-radius: 8px; font-family: inherit; font-size: 14px; resize: vertical;"></textarea>
                            <p class="help-text">O campo se expande conforme você digita mais códigos</p>
                        </div>

                        <!-- Descrição -->
                        <div class="form-row-3cols">
                            <div class="form-group">
                                <label for="codigo-cmb">Código principal *</label>
                                <input type="text" id="codigo-cmb" required placeholder="Ex: 110001" maxlength="11">
                            </div>

                            <div class="form-group">
                                <label for="descricao-cmb">Descrição *</label>
                                <input type="text" id="descricao-cmb" required placeholder="Ex: COMBO COMPLETO" maxlength="35">
                            </div>

                            <div class="form-group">
                                <label for="subdescricao-cmb">Sub descrição</label>
                                <input type="text" id="subdescricao-cmb" placeholder="Ex: Marca Premium">
                            </div>
                        </div>

                        <!-- CORES em vez de Características -->
                        <div class="form-group">
                            <label>Cores (separadas por " | ")</label>
                            <div class="features-input-compact">
                                <input type="text" id="feature-cmb-1" placeholder="Ex: Branco">
                                <span class="separator">|</span>
                                <input type="text" id="feature-cmb-2" placeholder="Bege">
                                <span class="separator">|</span>
                                <input type="text" id="feature-cmb-3" placeholder="Cinza">
                            </div>
                        </div>

                        <!-- Parcelamento -->
                        <div class="form-row-4cols">
                            <div class="form-group">
                                <label for="metodo-cmb">Parcelamento *</label>
                                <select id="metodo-cmb" required>
                                    <option value="">Selecione...</option>
                                    <option value="1x">1x</option>
                                    <option value="3x">3x</option>
                                    <option value="5x">5x</option>
                                    <option value="10x">10x</option>
                                    <option value="12x">12x</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="avista-cmb">Valor à vista *</label>
                                <div class="input-currency">
                                    <span>R$</span>
                                    <input type="text" id="avista-cmb" required placeholder="0,00">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="juros-cmb">Taxa de juros *</label>
                                <select id="juros-cmb" required>
                                    <option value="">Selecione...</option>
                                    <option value="carne">Carnê</option>
                                    <option value="cartao">Cartão</option>
                                    <option value="virado">Preço virado</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="parcela-cmb">Valor da parcela</label>
                                <div class="input-currency">
                                    <span>R$</span>
                                    <input type="text" id="parcela-cmb" placeholder="0,00">
                                </div>
                            </div>
                        </div>

                        <!-- Campos extras -->
                        <div id="extra-campos-cmb" style="display: none;"></div>

                        <button type="submit" class="btn-primary">
                            <i class="fa-solid fa-plus"></i> Adicionar Combo
                        </button>
                    </form>
                </div>
            </div>
        </main>
    </div>

    <!-- Preview Container (hidden) -->
    <div id="previews" style="display: none;"></div>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Confirmation Dialog -->
    <div id="confirm-overlay" class="confirm-overlay">
        <div class="confirm-dialog">
            <div class="confirm-header">
                <div id="confirm-icon" class="confirm-icon danger">
                    <i class="fa-solid fa-triangle-exclamation"></i>
                </div>
                <div class="confirm-header-text">
                    <h3 id="confirm-title">Confirmar ação</h3>
                    <p id="confirm-subtitle">Esta ação não pode ser desfeita</p>
                </div>
            </div>
            <div class="confirm-body">
                <p id="confirm-message" class="confirm-message">Tem certeza que deseja continuar?</p>
            </div>
            <div class="confirm-footer">
                <button id="confirm-cancel-btn" class="confirm-btn confirm-btn-cancel">Cancelar</button>
                <button id="confirm-confirm-btn" class="confirm-btn confirm-btn-confirm">Confirmar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Busca por Texto -->
    <div id="modal-busca-texto" class="modal-overlay">
        <div class="modal-busca-content">
            <div class="modal-header">
                <h2><i class="fa-solid fa-magnifying-glass"></i> Buscar Produto</h2>
                <button class="modal-close" onclick="fecharModalBuscaTexto()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="busca-texto-header">
                    <div class="form-group" style="margin-bottom: 0; position: relative;">
                        <input type="text" id="busca-texto-input" placeholder="Digite o código, nome ou marca do produto..." style="padding: 12px 50px 12px 16px; font-size: 15px;">
                        <button id="btn-agrupar" class="btn-agrupar-toggle" title="Opções de agrupamento">
                            <i class="fa-solid fa-chevron-down"></i>
                        </button>
                    </div>
                    
                    <!-- Menu de Agrupamento -->
                    <div id="menu-agrupamento" class="menu-agrupamento" style="display: none;">
                        <button class="menu-agrupamento-item" onclick="alterarAgrupamento('nenhum')">
                            <i class="fa-solid fa-list"></i>
                            <span>Sem agrupamento</span>
                        </button>
                        <button class="menu-agrupamento-item" onclick="alterarAgrupamento('marca')">
                            <i class="fa-solid fa-tag"></i>
                            <span>Agrupar por marca</span>
                        </button>
                        <button class="menu-agrupamento-item" onclick="alterarAgrupamento('codigo')">
                            <i class="fa-solid fa-barcode"></i>
                            <span>Agrupar por código similar</span>
                        </button>
                    </div>
                </div>
                
                <div id="busca-texto-loading" style="display: none; text-align: center; padding: 40px;">
                    <div class="spinner"></div>
                    <p style="margin-top: 20px; color: var(--gray-600);">Carregando produtos...</p>
                </div>
                
                <div id="busca-texto-results" style="display: none;">
                    <div class="busca-texto-table-wrapper">
                        <table class="busca-texto-table">
                            <thead>
                                <tr>
                                    <th style="width: 120px;">Código</th>
                                    <th>Descrição</th>
                                    <th style="width: 140px;">Valor à vista</th>
                                    <th style="width: 80px; text-align: center;">Ação</th>
                                </tr>
                            </thead>
                            <tbody id="busca-texto-tbody">
                                <!-- Produtos serão inseridos aqui -->
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="busca-texto-pagination" id="busca-texto-pagination">
                        <!-- Paginação será inserida aqui -->
                    </div>
                </div>
                
                <div id="busca-texto-empty" style="display: none; text-align: center; padding: 40px; color: var(--gray-400);">
                    <i class="fa-solid fa-box-open" style="font-size: 48px; margin-bottom: 16px; display: block;"></i>
                    <p style="font-size: 16px; color: var(--gray-600);">Nenhum produto encontrado.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Tabela de Fatores -->
    <div id="modal-fator" class="modal-overlay">
        <div class="modal-fator-content">
            <div class="modal-header">
                <h2><i class="fa-solid fa-calculator"></i> Tabela de Fatores</h2>
                <button class="modal-close" onclick="fecharModalFator()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="tabela-info">
                    <div class="info-item">
                        <span>Valor à Vista</span>
                        <strong id="tabela-valor-vista">R$ 0,00</strong>
                    </div>
                    <div class="info-item">
                        <span>Tipo de Taxa</span>
                        <strong id="tabela-tipo-taxa">-</strong>
                    </div>
                </div>
                
                <table class="tabela-fatores">
                    <thead>
                        <tr>
                            <th>Parcelas</th>
                            <th>Fator</th>
                            <th>Valor Total</th>
                            <th>Valor da Parcela</th>
                        </tr>
                    </thead>
                    <tbody id="tabela-fatores-body">
                        <!-- Linhas serão inseridas via JavaScript -->
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="window.print()">
                    <i class="fa-solid fa-print"></i> Imprimir
                </button>
                <button class="btn-primary" onclick="fecharModalFator()">
                    <i class="fa-solid fa-check"></i> Fechar
                </button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>